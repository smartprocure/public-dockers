cluster.name: <%= env_cluster_name ||= 'elasticsearch' %>

<% if (env_node_name) %>
node.name: <%= env_node_name %>
<% end %>

node.master: <%= env_node_type != 'data' ? 'true' : 'false' %>
node.data: <%= env_node_type != 'master' ? 'true' : 'false' %>

<% if (env_node_rack) %>
node.rack: <%= env_node_rack %>
cluster.routing.allocation.awareness.attributes: rack
<% end %>

node.max_local_storage_nodes: 1

#index.number_of_shards: 5
#index.number_of_replicas: 1

#path.conf: /path/to/conf
#path.data: /path/to/data1,/path/to/data2
#path.work: /path/to/work
#path.logs: /path/to/logs
#path.plugins: /path/to/plugins

#plugin.mandatory: mapper-attachments,lang-groovy

bootstrap.mlockall: <%= env_mlockall ||= 'true' %>

#network.bind_host: 192.168.0.1
#network.publish_host: 192.168.0.1
#network.host: 192.168.0.1
#transport.tcp.port: 9300
transport.tcp.compress: true
#http.port: 9200
http.max_content_length: <%= env_max_content_length ||= '100mb' %>
#http.enabled: false

#gateway.type: local
<% if (env_recover_nodes) %>
gateway.recover_after_nodes: <%= env_recover_nodes %>
<% end %>
#gateway.recover_after_time: 5m
#gateway.expected_nodes: 2

#cluster.routing.allocation.node_initial_primaries_recoveries: 4
#cluster.routing.allocation.node_concurrent_recoveries: 2
#indices.recovery.max_bytes_per_sec: 20mb
#indices.recovery.concurrent_streams: 5

#discovery.zen.minimum_master_nodes: 1
#discovery.zen.ping.timeout: 3s
discovery.zen.ping.multicast.enabled: false
#discovery.zen.ping.unicast.hosts: ["host1", "host2:port"]

cloud.node.auto_attributes: true

<% if (env_aws_access_key && env_aws_secret_key) %>
cloud.aws.access_key: <%= env_aws_access_key %>
cloud.aws.secret_key: <%= env_aws_secret_key %>
<% end %>

<% if (env_discovery_type) %>
discovery.type: <%= env_discovery_type %>
<% end %>

<% if (env_aws_groups) %>
discovery.groups: <%= env_aws_groups %>
discovery.any_group: false
<% end %>

<% if (env_aws_tag_name && env_aws_tag_value) %>
discovery.ec2.tag.<%= env_aws_tag_name %>: <%= env_aws_tag_value %>
<% end %>

#index.search.slowlog.threshold.query.warn: 10s
#index.search.slowlog.threshold.query.info: 5s
#index.search.slowlog.threshold.query.debug: 2s
#index.search.slowlog.threshold.query.trace: 500ms

#index.search.slowlog.threshold.fetch.warn: 1s
#index.search.slowlog.threshold.fetch.info: 800ms
#index.search.slowlog.threshold.fetch.debug: 500ms
#index.search.slowlog.threshold.fetch.trace: 200ms

#index.indexing.slowlog.threshold.index.warn: 10s
#index.indexing.slowlog.threshold.index.info: 5s
#index.indexing.slowlog.threshold.index.debug: 2s
#index.indexing.slowlog.threshold.index.trace: 500ms

#monitor.jvm.gc.young.warn: 1000ms
#monitor.jvm.gc.young.info: 700ms
#monitor.jvm.gc.young.debug: 400ms

#monitor.jvm.gc.old.warn: 10s
#monitor.jvm.gc.old.info: 5s
#monitor.jvm.gc.old.debug: 2s

#http.jsonp.enable: true
script.disable_dynamic: false